<% var layerCount = _(obj.layers||{}).size(); %>
<div id='source-<%=obj.id%>' class='source'>
<section class='thumbed'>
  <div class='image' <% if (obj.image) { %>style='background-image:url("<%=obj.image%>")'<% } %>></div>
  <h3><%= obj.name %></h3>
  <div class='desc'><%= obj.description || 'No description.' %></div>
  <small class='layers'>
    <%= layerCount %> <%= layerCount === 1 ? 'layer' : 'layers' %>
    <% if (obj.author) { %>
    from <%= obj.author %>
    <% } %>
  </small>
</section>
<h3 class='remote'><%= obj.name %></h3>
<a href='#delete' class='delete'>âœ•</a>
<% _(obj.layers).chain().pairs().reverse().each(function(l) { %>
<a id='menu-layers-<%=l[0]%>' href='#menu-layers-<%=l[0]%>'>
  <span class='geometry <%=l[1].geometry||'unknown'%>'></span>
  <%=l[0]%>
  <span class='zooms'>
    <% if (!l[1].maxzoom) { %>
    z<%= l[1].minzoom||0 %>+
    <% } else { %>
    z<%= l[1].minzoom||0 %>-<%= l[1].maxzoom||22 %>
    <% } %>
  </span>
  <small class='desc'><%=l[1].description||'No description.'%></small>
  <% _(l[1].attributes||{}).each(function(desc,name) { %>
  <small><code><%=name%></code> <%=desc||'No description.'%></small>
  <% }); %>
  <span class='moreless'></span>
</a>
<% }); %>
</div>
