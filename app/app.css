/* Base candidates */
.pad0  { padding:5px; }
.pad0y { padding-top:5px; padding-bottom:5px; }
.pad0x { padding-right:5px; padding-left:5px; }

.z1   { z-index:1; }
.z10  { z-index:10; }
.z100 { z-index:100; }

.pin-bottomright {
  position:absolute;
  bottom:0;
  right:0;
  }
.pin-bottomleft {
  position:absolute;
  bottom:0;
  left:0;
  }

.fill-dark            { background-color:#404040; }
.fill-dark a          { color:#fff; }
.fill-dark .pill > *  { border-color:#333; }

.short.button.icon:empty  { width:30px; padding:5px; }
.short.button             { height:30px; padding:5px 10px; }
/* END Base candidates */

.dark.action,
.action { color:#fff; }
.dark.action:hover,
.action:hover { background:#3bb2d0; color:#fff; }

.action-description { color:#404040; }

pre,
.CodeMirror { font:13px/20px normal Droidsansmono,monospace; }

/* Base styles */
body {
  background:#ddd;
  background-image:-webkit-linear-gradient(#ddd 75%,#bbb);
  overflow:hidden;
  }

body.dark {
  background:#333;
  background-image:-webkit-linear-gradient(#333 75%,#222);
  }

.clear { background:transparent !important; }
.lefted { text-align:left; }
.iso { margin:40px 0px; }

section.thin { padding:10px 30px 9px; }

.dark section,
.dark a.section { border-color:rgba(0,0,0,0.1); }
.dark a.section:hover { background-color:rgba(0,0,0,0.4); }

.thumbed {
  background:url(./thumb.png) no-repeat -100px 0;
  }
  .thumbed.style { background-position:0 0; }
  .thumbed.source { background-position:0 -70px; }
  .thumbed.remote { background-position:0 -140px; }

section pre {
  margin-bottom:20px;
  }
section .CodeMirror { display:block; position:static; height:400px; visibility:visible; }

.column {
  position:absolute;
  bottom:0%;
  height:100%;
  box-shadow:rgba(0,0,0,0.1) -2px 0px 0px;
  -webkit-transition:left 200ms, width 200ms;
  }

.cell {
  display:inline-block;
  vertical-align:top;
  width:50%;
  }

/* @TODO migrate to denom system for 1/4ths as well */
.w1 { width:25%; }
.w2 { width:50%; }
.w3 { width:75%; }
.w4 { width:100%; }
.w13 { width:33.3333%; }
.w23 { width:66.6667%; }
.w33 { width:100%; }
.l0 { left:0%; }
.l1 { left:25%; }
.l2 { left:50%; }
.l3 { left:75%; }
.l4 { left:100%; }

.darken { background:rgba(0,0,0,0.4); }
.lighten { background:rgba(255,255,255,0.4); }

.pane {
  position:absolute;
  z-index:1002;
  bottom:100%;
  height:100%;
  box-shadow:rgba(0,0,0,0.1) -2px 0px 0px;
  -webkit-transition:bottom 200ms;
  }
.pane > * { display:none; }
.overlay:target .pane > *,
.pane:target > * { display:block; }
.overlay:target .pane,
.pane:target { bottom:0%; }
.pane.dark {
  background:#444;
  background-image:-webkit-linear-gradient(#444 75%,#333);
  }
.pane > .column { overflow:auto; }

/* Map */
#map {
  background:#ddd url(canvas.png);
  }
.leaflet-control {
  z-index:0;
  }
.leaflet-left {
  z-index:0;
  }
#zoomedto {
  position:absolute;
  right:0px;
  top:40px;
  margin:10px 10px 0px 0px;
  height:0px;
  background:#fff;
  }
#zoomedto .z {
  display:none;
  padding:0px 0px 0px 60px;
  position:relative;
  border-radius:3px;
  border:1px solid #ccc;
  width:100px; height:20px;
  font-weight:bold;
  font-size:10px;
  line-height:19px;
  }
#zoomedto strong {
  position:absolute;
  left:0px;
  padding:0px 5px;
  width:30px;
  text-align:center;
  border-right:1px solid #ccc;
  }
#zoomedto .range {
  height:2px;
  position:absolute;
  overflow:hidden;
  left:65px;
  right:5px;
  top:8px;
  background:rgba(0,0,0,0.1);
  display:block;
  }
#zoomedto .minmax {
  height:2px;
  display:block;
  background:rgba(255,255,255,0.2);
  position:absolute;
  }
#zoomedto .marker {
  position:absolute;
  display:block;
  width:2px;
  height:2px;
  background:#888;
  }
#zoomedto .avg {
  display:block;
  position:absolute;
  top:0px;
  left:30px;
  padding:0px 5px;
  font-size:8px;
  }
#zoomedto.z0 .z0,
#zoomedto.z1 .z1,
#zoomedto.z2 .z2,
#zoomedto.z3 .z3,
#zoomedto.z4 .z4,
#zoomedto.z5 .z5,
#zoomedto.z6 .z6,
#zoomedto.z7 .z7,
#zoomedto.z8 .z8,
#zoomedto.z9 .z9,
#zoomedto.z10 .z10,
#zoomedto.z11 .z11,
#zoomedto.z12 .z12,
#zoomedto.z13 .z13,
#zoomedto.z14 .z14,
#zoomedto.z15 .z15,
#zoomedto.z16 .z16,
#zoomedto.z17 .z17,
#zoomedto.z18 .z18,
#zoomedto.z19 .z19,
#zoomedto.z20 .z20,
#zoomedto.z21 .z21,
#zoomedto.z22 .z22 {
  display:block;
  background:#fff;
  }
#zoomedto:target {
  z-index:1001;
  overflow:hidden;
  background:#eee;
  height:120px;
  left:0px;
  margin:0px;
  -moz-transition:height 100ms;
  -webkit-transition:height 100ms;
  }
#zoomedto:target .z0,
#zoomedto:target .z6,
#zoomedto:target .z12,
#zoomedto:target .z18 { top:0px; }
#zoomedto:target .z1,
#zoomedto:target .z7,
#zoomedto:target .z13,
#zoomedto:target .z19 { top:20px; }
#zoomedto:target .z2,
#zoomedto:target .z8,
#zoomedto:target .z14,
#zoomedto:target .z20 { top:40px; }
#zoomedto:target .z3,
#zoomedto:target .z9,
#zoomedto:target .z15,
#zoomedto:target .z21 { top:60px; }
#zoomedto:target .z4,
#zoomedto:target .z10,
#zoomedto:target .z16,
#zoomedto:target .z22 { top:80px; }
#zoomedto:target .z5,
#zoomedto:target .z11,
#zoomedto:target .z17,
#zoomedto:target .z23 { top:100px; }
#zoomedto:target .z6,
#zoomedto:target .z7,
#zoomedto:target .z8,
#zoomedto:target .z9,
#zoomedto:target .z10,
#zoomedto:target .z11 { left:25%; }
#zoomedto:target .z12,
#zoomedto:target .z13,
#zoomedto:target .z14,
#zoomedto:target .z15,
#zoomedto:target .z16,
#zoomedto:target .z17 { left:50%; }
#zoomedto:target .z18,
#zoomedto:target .z19,
#zoomedto:target .z20,
#zoomedto:target .z21,
#zoomedto:target .z22,
#zoomedto:target .z23 { left:75%; }
#zoomedto:target .z {
  width:25%;
  border:0px;
  border-bottom:1px solid #ddd;
  border-right:1px solid #ddd;
  border-radius:0px;
  position:absolute;
  display:block;
  }
#zoomedto .close { display:none; }
#zoomedto:target .close { display:block; }

.dark #zoomedto { background:#282828; }
.dark #zoomedto.z0 .z0,
.dark #zoomedto.z1 .z1,
.dark #zoomedto.z2 .z2,
.dark #zoomedto.z3 .z3,
.dark #zoomedto.z4 .z4,
.dark #zoomedto.z5 .z5,
.dark #zoomedto.z6 .z6,
.dark #zoomedto.z7 .z7,
.dark #zoomedto.z8 .z8,
.dark #zoomedto.z9 .z9,
.dark #zoomedto.z10 .z10,
.dark #zoomedto.z11 .z11,
.dark #zoomedto.z12 .z12,
.dark #zoomedto.z13 .z13,
.dark #zoomedto.z14 .z14,
.dark #zoomedto.z15 .z15,
.dark #zoomedto.z16 .z16,
.dark #zoomedto.z17 .z17,
.dark #zoomedto.z18 .z18,
.dark #zoomedto.z19 .z19,
.dark #zoomedto.z20 .z20,
.dark #zoomedto.z21 .z21,
.dark #zoomedto.z22 .z22 { background:#333; }
.dark #zoomedto .z,
.dark #zoomedto strong { border-color:#222; }

.leaflet-container.dark .leaflet-bar,
.leaflet-container.dark .leaflet-bar a { border-color:#222; }

.leaflet-container.dark .leaflet-popup-content-wrapper,
.leaflet-container.dark .leaflet-popup-tip { background:#333; }

#map-overlay {
  position:absolute;
  top:0px; bottom:0px; width:100%;
  background:rgba(64,64,64,0.4);
  z-index:-1;
  opacity:0;
  -webkit-transition:opacity 200ms ease-in 100ms, z-index 200ms ease-in 100ms;
  }
#map-overlay:before {
  content:'';
  width:40px;
  height:40px;
  position:absolute; left:50%; top:50%;
  margin:-20px 0px 0px -20px;
  border-radius:50%;
  box-shadow:rgba(0,0,0,0.1) 0px 0px 0px 10px;
  background:#444 url(spinner.gif) 50% 50% no-repeat;
  }
.loading #map-overlay {
  z-index:1000;
  opacity:1;
  }

#map-errors {
  position:absolute;
  bottom:0px; width:100%;
  z-index:1000;
  }
#map-errors .msg {
  display:block;
  font-size:80%;
  padding:10px 20px;
  background-color:rgba(0,0,0,0.1);
  }
/* Menu (off-canvas) */
.menu .sortable-dragging,
.menu .sortable-placeholder {
  display:block;
  padding:10px 20px 9px;
  min-height:40px;
  position:relative;
  border-bottom:1px solid rgba(0,0,0,0.1);
  }
.menu nav h3 { padding:5px; border:0px; }
.menu nav a.right { position:absolute; top:5px; right:5px; }
.menu nav a.button.title:active { background-color:#333; }

/* Sortable states */
.menu .sortable-placeholder { background:rgba(0,0,0,0.1); }
.menu .sortable-dragging {
  background:#444;
  padding:9px 19px;
  border:1px solid rgba(0,0,0,0.1);
  border-radius:4px;
  }

.hide { display:none; }
.hide:target { display:block; }

/* Data menu */
#layers a.layer { white-space:nowrap; }
#layers .data-y,
#layers .data-n { display:none; }

#layers a.delete {
  position:absolute; right:0px; top:1px;
  border:0px; height:38px; padding:9px 10px 9px;
  background:#444;
  display:none;
  }

#data:target ~ #layers { display:block; }
#data:target ~ #layers a.delete { display:block; }
#data:target ~ #layers .sourcetype { display:none; }

#layers .geometry { opacity:0.6; }
#layers a.active { color:#fff; background:rgba(0,0,0,0.1); border-color:transparent; }
#layers a.active .geometry { opacity:1; }
#layers .delete {
  position:absolute;
  right:5px; top:10px;
  border-radius:50%;
  }
#layers .delete:hover { background:rgba(0,0,0,0.1); }
#layers .zooms,
#layers .datasource {
  font-size:10px; line-height:10px;
  }
#layers .datasource { right:30px; border-radius:2px; }
#layers small {
  display:none;
  -webkit-transition:200ms;
  }
#layers .active small { display:block; }
#layers .field {
  margin-left:80px;
  white-space:normal;
}
#layers .field code {
  color:#ff8;
  display:inline-block;
  margin-left:-80px;
  width:80px;
  overflow:hidden;
  }

/* Project history */
#settings-style,
#settings-source { display:none; }
#settings-style.active,
#settings-source.active { display:block; }

/* Modal popup */
.modal {
  display:none;
  position:absolute; left:50%; top:20%; z-index:2001;
  padding:20px;
  border-radius:4px;
  width:320px;
  margin:0px 0px 0px -160px;
  background:#ddd;
  box-shadow:rgba(0,0,0,0.1) 0px 0px 0px 3px;
  }
.modal .close {
  position:absolute; top:-15px; right:-15px;
  border-radius:50%;
  }
#mask {
  display:none;
  position:absolute; z-index:2000;
  width:100%; height:100%;
  background:rgba(224,224,224,0.8);
  }
.modal.target,
.modal:target,
.modal:target ~ #mask { display:block; }

.dark .modal { background:#444; }
.dark #mask { background:rgba(0,0,0,0.8); }

label.ghost {
  position:absolute;
  width:50px;
  margin:5px 0px 0px -60px;
  border-radius:3px;
  text-align:right;
  font-size:80%;
  opacity:0.2;
  }

label.xray { opacity:0.5; width:80px; }
label.w1,
label.w2,
label.w3 { display:inline-block; }

/* CodeMirror*/
.CodeMirror,
.CodeMirror * {
  box-sizing:content-box;
  -moz-box-sizing:content-box;
  }
.CodeMirror {
  position:absolute;
  background:#f8f8f8;
  top:40px; bottom:0px;
  width:100%; height:auto;
  visibility:hidden;
  }
.CodeMirror-lines,
.CodeMirror-gutter-text { padding:0px; }
.CodeMirror-gutter-text pre { padding:0px 5px; }
.CodeMirror-lines { padding:0px 10px; }
.CodeMirror-scroll { height:100%; }
.CodeMirror.active { visibility:visible; }
.CodeMirror-gutter {
  background:#f8f8f8;
  width:39px !important;
  border-right:1px solid #ddd;
  }
.CodeMirror-gutter .error {
  position:relative;
  background:#ff8;
  color:#880;
  }
.CodeMirror-gutter .error .message {
  position:absolute; left:0%; top:100%;
  display:none;
  background:#ff8;
  font-size:80%;
  white-space:normal !important;
  text-align:left;
  width:240px;
  padding:5px 30px 5px 10px;
  border-radius:0px 3px 3px 0px;
  }
.CodeMirror-gutter .error .icon {
  position:absolute; top:0px; right:0px;
  border-radius:50%;
  width:20px; height:20px;
  text-align:center;
  }
.CodeMirror-gutter .error a:target ~ .message { display:block; }
span.cm-keyword,
span.cm-carto-variable           { color:#708; }
span.cm-carto-color-variable     { color:#B60049; }
span.cm-number,
span.cm-carto-unit               { color:#281; }
span.cm-atom,
span.cm-carto-value              { color:#708; }
span.cm-carto-valid-value        { color:#B60049; }
span.cm-carto-selector           { color:#b64f90; }
span.cm-carto-identifier         { color:#999; }
span.cm-carto-valid-identifier   { color:#333; }
span.cm-carto-important          { color:#03c; }
span.cm-carto-colorcode          { color:#048; }
span.cm-carto-punctuation        { color:#666; }
span.cm-carto-comment            { color:#999; }
span.cm-string,
span.cm-carto-string             { color:#8010a0; }
span.cm-carto-filter             { color:#66475B; }

.dark .CodeMirror { background:transparent; }
.dark .CodeMirror-gutter { background:transparent; border-color:rgba(0,0,0,0.1); }
.dark .CodeMirror pre.CodeMirror-cursor { border-color:#ccc; }
.dark span.cm-keyword,
.dark span.cm-carto-variable           { color:#d6e; }
.dark span.cm-number,
.dark span.cm-carto-unit               { color:#9d7; }
.dark span.cm-string,
.dark span.cm-carto-string             { color:#d7f; }
.dark span.cm-atom,
.dark span.cm-carto-value              { color:#d6e; }

/* File browser modal */
.modal.browser {
  top:10%; bottom:10%;
  padding:0px;
  }
.modal.browser .cwd,
.modal.browser .list,
.modal.browser .field { position:absolute; width:100%; }
.modal.browser .cwd {
  z-index:1;
  height:50px;
  padding:10px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
  border-bottom:1px solid rgba(0,0,0,0.1);
  }
.modal.browser .cwd a { margin-right:10px; }
.modal.browser .field {
  z-index:1;
  bottom:0px;
  height:50px;
  padding:9px 20px 10px;
  border-top:1px solid rgba(0,0,0,0.1);
  }
.modal.browser .list {
  top:50px; bottom:50px;
  overflow:auto;
  background:rgba(0,0,0,0.1);
  }
.modal.browser .list a {
  display:block;
  padding:5px 20px 4px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
  border-bottom:1px solid rgba(0,0,0,0.1);
  }

/* Media queries */
@media (max-width:800px) {
  body { font-size:12px; }
  pre, .CodeMirror { font-size:11px; }
  a.section,
  section { float:none; width:auto; }
  }
@media (min-width: 1580px) {
  #code { left:55%; width:45%; }
  #docs,
  #full { width:55%; }
  .pane:target ~ #full,
  .menu:target ~ #full { width:50%; }
  }
@media (min-width: 1780px) {
  #code { left:60%; width:40%; }
  #docs,
  #full { width:60%; }
  }
